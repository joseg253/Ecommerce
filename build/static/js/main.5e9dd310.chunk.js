(this["webpackJsonpecommerce-app"]=this["webpackJsonpecommerce-app"]||[]).push([[0],{106:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(50),l=a.n(c),i=a(3),s=(a(62),a(63),a(11)),m=a(5),o=(a(64),a(51)),u=a.n(o),d=a(52),p=a.n(d),E=Object(n.createContext)(),_=function(e){var t=e.reducer,a=e.initialState,c=e.children;return r.a.createElement(E.Provider,{value:Object(n.useReducer)(t,a)},c)},h=function(){return Object(n.useContext)(E)},g=a(35),v=a.n(g),f=v.a.initializeApp({apiKey:"AIzaSyC9CL7r0zRSOAf0FGroPJZovl98cnA-X7A",authDomain:"e-commerce-56b0d.firebaseapp.com",databaseURL:"https://e-commerce-56b0d.firebaseio.com",projectId:"e-commerce-56b0d",storageBucket:"e-commerce-56b0d.appspot.com",messagingSenderId:"436664663894",appId:"1:436664663894:web:665623532605727ba660f7",measurementId:"G-5CG06HNFC3"}).firestore(),b=v.a.auth();var N=function(){var e=h(),t=Object(i.a)(e,1)[0],a=t.basket,n=t.user;return r.a.createElement("nav",{className:"header"},r.a.createElement(s.b,{to:"/"},r.a.createElement("img",{className:"header__logo",src:"https://www.onlinelogomaker.com/blog/wp-content/uploads/2017/12/AdobeStock_113126068-Converted.jpg",alt:""})),r.a.createElement("div",{className:"header__search"},r.a.createElement("input",{type:"text",className:"header__searchInput"}),r.a.createElement(u.a,{className:"header__searchIcon"})),r.a.createElement("div",{className:"header__nav"},r.a.createElement(s.b,{to:!n&&"/login",className:"header__link"},r.a.createElement("div",{onClick:function(){n&&b.signOut()},className:"header__option"},r.a.createElement("span",{className:"header__optionLineOne"},"Hello ",null===n||void 0===n?void 0:n.email),r.a.createElement("span",{className:"header__optionLineTwo"},n?"Sign Out":"Sign in"))),r.a.createElement(s.b,{to:"/orders",className:"header__link"},r.a.createElement("div",{className:"header__option"},r.a.createElement("span",{className:"header__optionLineOne"},"Returns"),r.a.createElement("span",{className:"header__optionLineTwo"},"Orders"))),r.a.createElement(s.b,{to:"/checkout",className:"header__link"},r.a.createElement("div",{className:"header_optionBasket"},r.a.createElement(p.a,null),r.a.createElement("span",{className:"header_optionLineTwo header__basketCount"},null===a||void 0===a?void 0:a.length)))))},S=(a(80),a(81),a(31)),O=a.n(S);var y=function(e){var t=e.id,a=e.title,n=e.image,c=e.price,l=e.rating,s=h(),m=Object(i.a)(s,2),o=(m[0].basket,m[1]),u=r.a.useState(!1),d=Object(i.a)(u,2),p=(d[0],d[1]);return r.a.createElement("div",{className:"product"},r.a.createElement("div",{className:"product__info"},r.a.createElement("p",null,a),r.a.createElement("p",{className:"product__price"},r.a.createElement("small",null,"$"),r.a.createElement("strong",null,c)),r.a.createElement("div",{className:"product__rating"},Array(l).fill().map((function(e){return r.a.createElement("p",null,r.a.createElement(O.a,{className:"product__star"}))})))),r.a.createElement("img",{className:"product__image",src:n,alt:""}),r.a.createElement("button",{className:"product__button",onClick:function(){p(!0),o({type:"ADD_TO_BASKET",item:{id:t,title:a,image:n,price:c,rating:l}})}},"Add to basket"))};var k=function(){return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"home__image"},r.a.createElement("img",{src:"https://www.wellingtonsstores.com/wp-content/uploads/2020/01/Home-banner-5superuser09-08-2018_04-04-23.png"})),r.a.createElement("div",{className:"home__row"},r.a.createElement(y,{id:"16",title:"TApple iPad (10.2-inch, Wi-Fi, 128GB) - Silver (Latest Model)",price:399.98,rating:4,image:"https://images-na.ssl-images-amazon.com/images/I/61J6uczVvJL._AC_UL200_SR200,200_.jpg"}),r.a.createElement(y,{id:"17",title:"Kindle Paperwhite \u2013 Now Waterproof with more than 2x the Storage  \u2013 Ad-Supported + Kindle Unlimited",price:129.99,rating:3,image:"https://images-na.ssl-images-amazon.com/images/I/61eAq6gg-XL._AC_UL200_SR200,200_.jpg"})),r.a.createElement("div",{className:"home__row"},r.a.createElement(y,{id:"14",title:"Ring Indoor Cam, Compact Plug-In HD security camera with two-way talk",price:73.99,rating:4,image:"https://images-na.ssl-images-amazon.com/images/I/41Ggoy6fE2L._AC_UL200_SR200,200_.jpg"}),r.a.createElement(y,{id:"13",title:"Apple Watch Series 3 (GPS, 38mm) - Space Gray Aluminum Case with Black Sport Band",price:169,rating:5,image:"https://images-na.ssl-images-amazon.com/images/I/71fwbMm1NBL._AC_UL200_SR200,200_.jpg"}),r.a.createElement(y,{id:"15",title:"TNETGEAR Nighthawk Smart WiFi Router (R6700) - AC1750 Wireless Speed (up to 1750 Mbps)",price:86,rating:4,image:"https://images-na.ssl-images-amazon.com/images/I/61FA9BbugzL._AC_UL200_SR200,200_.jpg"})),r.a.createElement("div",{className:"home__row"},r.a.createElement(y,{id:"12",title:"Samsung - 65 Class - 7 Series - 4K UHD TV - Smart - LED - with HDR",price:499.99,rating:4,image:"https://pisces.bbystatic.com/image2/BestBuy_US/images/products/6401/6401722_sd.jpg"})))};a(82);var j=function(e){var t=e.id,a=e.title,n=e.image,c=e.price,l=e.rating,s=e.hideButton,m=h(),o=Object(i.a)(m,2),u=(o[0].basket,o[1]);return r.a.createElement("div",{className:"checkoutProduct"},r.a.createElement("img",{src:n,alt:"",className:"checkoutProduct__image"}),r.a.createElement("div",{className:"checkoutProduct__info"},r.a.createElement("p",{className:"checkoutProduct__title"},a),r.a.createElement("p",{className:"checkoutProduct__price"},r.a.createElement("small",null,"$"),r.a.createElement("strong",null,c)),r.a.createElement("div",{className:"checkoutProduct__rating"},Array(l).fill().map((function(e){return r.a.createElement("p",null,r.a.createElement(O.a,{className:"product__star"}))}))),!s&&r.a.createElement("button",{className:"checkoutProduct__button",onClick:function(){u({type:"REMOVE_FROM_BASKET",id:t})}},"Remove from basket")))},w=(a(83),a(84),a(22)),C=a.n(w),A=a(39),T=a(18),P=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price+e}),0)};var R=function(e,t){switch(t.type){case"SET_USER":return Object(T.a)(Object(T.a)({},e),{},{user:t.user});case"ADD_TO_BASKET":return Object(T.a)(Object(T.a)({},e),{},{basket:[].concat(Object(A.a)(e.basket),[t.item])});case"REMOVE_FROM_BASKET":var a=Object(A.a)(e.basket),n=e.basket.findIndex((function(e){return e.id===t.id}));return n>=0?a.splice(n,1):console.warn("Cant remove product (id: ${action.id}) as its not "),Object(T.a)(Object(T.a)({},e),{},{basket:a});case"EMPTY_BASKET":return Object(T.a)(Object(T.a)({},e),{},{basket:[]});default:return e}};var B=function(){var e=Object(m.f)(),t=h(),a=Object(i.a)(t,2),n=a[0].basket;return a[1],r.a.createElement("div",{className:"subtotal"},r.a.createElement(C.a,{renderText:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Subtotal (",n.length," items): ",r.a.createElement("strong",null,e)))},decimalScale:2,value:P(n),displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement("button",{className:"subtotal__button",onClick:function(t){return e.push("/payment")}},"Proceed to checkout"))};var I=function(){var e=h(),t=Object(i.a)(e,1)[0].basket;return r.a.createElement("div",{className:"checkout"},r.a.createElement("div",{className:"checkout__left"},r.a.createElement("img",{className:"checkout__ad",src:"https://images-na.ssl-images-amazon.com/images/G/01/home/THILGMA/FallEvent2020/XCM_Manual_ORIGIN_1264037_1346839_US_us_fall_event_stripes_1_us_en_3339519_1500x90_en_US.jpg",alt:"asdas"}),0===(null===t||void 0===t?void 0:t.length)?r.a.createElement("div",null,r.a.createElement("h2",null,"Your Shopping Basket is empty"),r.a.createElement("p",null,"You have no items in your basket.")):r.a.createElement("div",null,r.a.createElement("h2",{className:"checkout_title"},"Your Shopping Basket",null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(j,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})}))))),t.length>0&&r.a.createElement("div",{className:"checkout__right"},r.a.createElement(B,null)))};a(86);var x=function(){var e=Object(m.f)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),d=u[0],p=u[1];return r.a.createElement("div",{className:"login"},r.a.createElement(s.b,{to:"/"},r.a.createElement("img",{className:"login__logo",src:"https://visualhierarchy.co/blog/wp-content/uploads/2018/04/amazon.jpg",alt:""})),r.a.createElement("div",{className:"login__container"},r.a.createElement("h1",null,"Sign in "),r.a.createElement("form",null,r.a.createElement("h5",null,"Email"),r.a.createElement("input",{value:c,onChange:function(e){return l(e.target.value)},type:"email"}),r.a.createElement("h5",null,"Password"),r.a.createElement("input",{value:d,onChange:function(e){return p(e.target.value)},type:"password"}),r.a.createElement("button",{type:"submit",className:"login__signInButton",onClick:function(t){t.preventDefault(),b.signInWithEmailAndPassword(c,d).then((function(t){e.push("/")})).catch((function(e){return alert(e.message)}))}},"Sign in")),r.a.createElement("button",{className:"login__createButton",onClick:function(t){t.preventDefault(),b.createUserWithEmailAndPassword(c,d).then((function(t){e.push("/")})).catch((function(e){return alert(e.message)}))}},"Create an Account")))},L=a(128);a(87);var D=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement(L.a,{container:!0,direction:"row",justify:"center"},r.a.createElement("div",{className:"footer__row"},r.a.createElement(L.a,{item:!0,xs:4,className:"col"},r.a.createElement("h4",{className:"title"},"Electronics Inc"),r.a.createElement("ul",{className:"list"},r.a.createElement("li",null,"253-800-5685"),r.a.createElement("li",null,"Seattle, Washington"),r.a.createElement("li",null,"1504 East Perry Lane"))),r.a.createElement(L.a,{item:!0,xs:4,className:"col"},r.a.createElement("h4",{className:"title"},"Support & Services"),r.a.createElement("ul",{className:"list"},r.a.createElement("li",null,"Customer Service"),r.a.createElement("li",null,"Protection Plancs"),r.a.createElement("li",null,"Recalls"))),r.a.createElement(L.a,{item:!0,xs:4,className:"col"},r.a.createElement("h4",{className:"title"},"Partnerships"),r.a.createElement("ul",{className:"list"},r.a.createElement("li",null,"Affiliate Program"),r.a.createElement("li",null,"Developers"),r.a.createElement("li",null,"Advertise with us"))))),r.a.createElement("div",null,r.a.createElement("hr",{style:{width:"35%"}}),r.a.createElement("p",{style:{fontSize:"small",paddingTop:"10px"}},"\xa9",(new Date).getFullYear()," Electronics Inc | All Rights Reserved | Terms of Service | Privacy")))},M=a(24),U=a.n(M),z=a(38),G=(a(89),a(21)),F=a(53),K=a.n(F).a.create({baseURL:"https://us-central1-e-commerce-56b0d.cloudfunctions.net/api"});var Y=function(){var e=h(),t=Object(i.a)(e,2),a=t[0],c=a.basket,l=a.user,o=t[1],u=Object(m.f)(),d=Object(G.useStripe)(),p=Object(G.useElements)(),E=Object(n.useState)(!1),_=Object(i.a)(E,2),g=_[0],v=_[1],b=Object(n.useState)(""),N=Object(i.a)(b,2),S=N[0],O=N[1],y=Object(n.useState)(null),k=Object(i.a)(y,2),w=k[0],A=k[1],T=Object(n.useState)(!0),R=Object(i.a)(T,2),B=R[0],I=R[1],x=Object(n.useState)(!0),L=Object(i.a)(x,2),D=L[0],M=L[1];Object(n.useEffect)((function(){(function(){var e=Object(z.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"post",url:"/payments/create?total=".concat(100*P(c))});case 2:t=e.sent,M(t.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]),console.log("the secret is >> ",D);var F=function(){var e=Object(z.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),O(!0),e.next=4,d.confirmCardPayment(D,{payment_method:{card:p.getElement(G.CardElement)}}).then((function(e){var t=e.paymentIntent;f.collection("users").doc(null===l||void 0===l?void 0:l.uid).collection("orders").doc(t.id).set({basket:c,amount:t.amount,created:t.created}),v(!0),A(null),O(!1),o({type:"EMPTY_BASKET"}),u.replace("/orders")}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"payment"},r.a.createElement("div",{className:"payment__container"},r.a.createElement("h1",null,"Checkout ( ",r.a.createElement(s.b,{to:"/checkout"}," ",c.length," items"),")"),r.a.createElement("div",{className:"payment__section"},r.a.createElement("div",{className:"payment__title"},r.a.createElement("h3",null,"Delivery Address")),r.a.createElement("div",{className:"payment__address"},r.a.createElement("p",null,null===l||void 0===l?void 0:l.email),r.a.createElement("p",null,"12 East Ave"),r.a.createElement("p",null,"Seattle, WA"))),r.a.createElement("div",{className:"payment__section"},r.a.createElement("div",{className:"payment__title"},r.a.createElement("h3",null,"Review Items ")),r.a.createElement("div",{className:"payment__items"},null===c||void 0===c?void 0:c.map((function(e){return r.a.createElement(j,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})})))),r.a.createElement("div",{className:"payment__section"},r.a.createElement("div",{className:"payment__title"},r.a.createElement("h3",null,"Payment Method ")),r.a.createElement("div",{className:"payment__details"},r.a.createElement("form",{className:"payment__form",onSubmit:F},r.a.createElement(G.CardElement,{onChange:function(e){I(e.empty),A(e.error?e.error.message:"")}}),r.a.createElement("div",{className:"payment__priceContainer"},r.a.createElement(C.a,{renderText:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Order Total: ",e))},decimalScale:2,value:P(c),displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement("button",{className:"buy__button",disabled:S||B||g},r.a.createElement("span",null,S?r.a.createElement("p",null,"Processing"):"Buy Now"))),w&&r.a.createElement("div",null,w))))))},H=a(54),W=(a(106),a(55)),J=a.n(W);var $=function(e){var t,a=e.order;return r.a.createElement("div",{className:"order"},r.a.createElement("h2",null,"Order"),r.a.createElement("p",null,J.a.unix(a.data.created).format("MMMM Do YYYY, h:mma")),r.a.createElement("p",{className:"order__id"},r.a.createElement("small",null,a.id)),null===(t=a.data.basket)||void 0===t?void 0:t.map((function(e){return r.a.createElement(j,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating,hideButton:!0})})),r.a.createElement(C.a,{renderText:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"order__total"},"Order Total: ",e))},decimalScale:2,value:a.data.amount/100,displayType:"text",thousandSeparator:!0,prefix:"$"}))};a(108);var V=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=h(),s=Object(i.a)(l,2),m=s[0],o=(m.basket,m.user);return s[1],Object(n.useEffect)((function(){o?f.collection("users").doc(null===o||void 0===o?void 0:o.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):c([])}),[o]),r.a.createElement("div",{className:"orders"},r.a.createElement("h1",null,"Your orders"),r.a.createElement("div",{className:"orders__container"},null===a||void 0===a?void 0:a.map((function(e){return r.a.createElement($,{order:e})}))))},X=Object(H.a)("pk_test_51HRNJBGSC0gHwz2Qa02fD1yObuNgWqC1hvIaEriBNTmkBOhTTt6QyXQvLCNiue6l6pP18DV42qtz1wSfCGHmvCGr00EtsU8MKG");var q=function(){var e=h(),t=Object(i.a)(e,2),a=(t[0].user,t[1]);return Object(n.useEffect)((function(){var e=b.onAuthStateChanged((function(e){a(e?{type:"SET_USER",user:e}:{tpye:"SET_USER",user:null})}));return function(){e()}}),[]),r.a.createElement(s.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/orders"},r.a.createElement(N,null),r.a.createElement(V,null)),r.a.createElement(m.a,{path:"/checkout"},r.a.createElement(N,null),r.a.createElement(I,null)),r.a.createElement(m.a,{path:"/login"},r.a.createElement(x,null)),r.a.createElement(m.a,{path:"/payment"},r.a.createElement(N,null),r.a.createElement(G.Elements,{stripe:X},r.a.createElement(Y,null))),r.a.createElement(m.a,{path:"/"},r.a.createElement(N,null),r.a.createElement(k,null),r.a.createElement(D,null)))))};l.a.render(r.a.createElement(_,{initialState:{basket:[],user:null},reducer:R},r.a.createElement(q,null)),document.getElementById("root"))},57:function(e,t,a){e.exports=a(109)},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},89:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.5e9dd310.chunk.js.map